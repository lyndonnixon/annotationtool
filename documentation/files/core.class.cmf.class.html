<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>API Documentation</title><link rel="stylesheet" href="../css/template.css" type="text/css"></link><script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script><script type="text/javascript" src="../js/jquery.tools.min.js"></script><script type="text/javascript" src="../js/jquery-ui-1.8.2.custom.min.js"></script><script type="text/javascript" src="../js/template.js"></script></head><body><div id="content"><h1 class="file">core/class/cmf.class.php<a href="../source/core/class/cmf.class.php.html"><img src="../images/icons/view_source.png" alt="View Source" border="0"></img></a></h1><div id="file-nav-box"><div id="file-nav-options">
              Show:
              <img src="../images/icons/visibility_public.png" alt="Public" id="show-public"></img><img src="../images/icons/visibility_protected.png" alt="Protected" id="show-protected"></img><img src="../images/icons/visibility_private.png" alt="Private" id="show-private"></img><span class="attribute" id="show-inherited">inherited</span></div><div id="file-nav-container"><ul id="file-nav"><li><a href="#classes"><img src="../images/icons/class.png" alt="Class" height="14"></img>
                          Classes
                      </a><ul><li><a href="#\CMF">\CMF</a></li></ul></li></ul><div style="clear: left;"></div></div><div id="file-nav-tab">
              Table of Contents
          </div></div><a name="top" class="anchor"></a><div id="file-description"><div class="long-description"></div></div><a name="classes" class="anchor"></a><a id="\CMF" class="anchor"></a><h2 class="class">\CMF<div class="to-top"><a href="#top">jump to top</a></div></h2><div class="class"><small class="package"><b>Package: </b>Core</small><div class="short-description">CMF</div><div class="long-description">Contains all methods which are required to transfer data to the CMF. Furthermore it includes methods to create Semantic Web tripes and to display them using the ConnectME ontology.

IMPORTANT: PEAR HTTP_Request library is used in this class (http://pear.php.net/package/HTTP_Request8)
IMPORTANT: ARC2 ARC2 library is used in this class (https://github.com/semsol/arc2)
IMPORTANT: Graphite Graphite library is used in this class (http://graphite.ecs.soton.ac.uk/)</div><dl class="class-info"><dt>Author</dt><dd>Matthias Bauer &lt;matthias.bauer@sti2.org&gt;
         
    </dd><dt>Copyright</dt><dd>2013 STI International, Seekda GmbH and Dr. Lyndon Nixon
         
    </dd><dt>License</dt><dd><a href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative Commons Attribution-NonCommercial-NoDerivs 3.0 Unported License</a>
         
    </dd><dt>Version</dt><dd>v2.3
         
    </dd></dl><h3>Properties</h3><div><a id="\CMF::$language" class="anchor"></a><div class="property public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img>object <span class="highlight">$language</span> = NULL</code><div class="description"><div class="short-description">Language strings of the Hyper Annotation Video Suite</div></div><div class="code-tabs"><div class="long-description"></div><strong>Default value</strong><code>NULL</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>object</dd></dl></div><div class="clear"></div></div><a id="\CMF::$settings" class="anchor"></a><div class="property public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png" alt="&gt;"></img><img src="../images/icons/arrow_down.png" alt="V" style="display: none;"></img></a><code class="title"><img src="../images/icons/property.png" alt="Property"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img>object <span class="highlight">$settings</span> = NULL</code><div class="description"><div class="short-description">Settings of the Hyper Annotation Video Suite</div></div><div class="code-tabs"><div class="long-description"></div><strong>Default value</strong><code>NULL</code><strong>Details</strong><dl class="property-info"><dt>Type</dt><dd>object</dd></dl></div><div class="clear"></div></div></div><h3>Methods</h3><div><a id="\CMF::__construct()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">__construct</span><span class="nb-faded-text">()</span> : bool</code><div class="description"><p class="short_description">Constructor</p></div><div class="code-tabs"><div class="long-description">Creates an instance of the cmf class and returns the settings and language object from it. They are passed to local parameters.

Fills @var settings and @var language</div><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>bool</td><td>true</td></tr></table></div><div class="clear"></div></div><a id="\CMF::convertToSeconds()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">convertToSeconds</span><span class="nb-faded-text">(string $input)</span> : integer</code><div class="description"><p class="short_description">Convert to seconds</p></div><div class="code-tabs"><div class="long-description">Converts an input time string from hh:mm:ss or mm:ss into seconds</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$input</th><td>string</td><td><em><p>Time string</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>integer</td><td>Seconds based on input time string</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::createAnnotationTriples()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">createAnnotationTriples</span><span class="nb-faded-text">(string $annotation, string $annotation_number, string $video_data, string $video_id, string $type)</span> : object</code><div class="description"><p class="short_description">Create Annotation Triples</p></div><div class="code-tabs"><div class="long-description">Parses the currently used annotation file and uses the method createAnnotationTriples to create all annotation triples which have to get inserted into the CMF. In the case of inserting data for the first time
(no annotations of the selected video exist in the CMF) a n3 string gets created and this string is inserted in the CMF.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$annotation</th><td>string</td><td><em><p>Data of the currently selected annotation</p></em></td></tr><tr><th>$annotation_number</th><td>string</td><td><em><p>Number of the currently selected annotation (annotation array row identifier)</p>
</em></td></tr><tr><th>$video_data</th><td>string</td><td><em><p>Video array which contains the currently selected video ID and its locators</p></em></td></tr><tr><th>$video_id</th><td>string</td><td><em><p>ID of the currently selected video</p></em></td></tr><tr><th>$type</th><td>string</td><td><em><p>Type of operation which shall get performed in the CMF with the selected annotation (INSERT, UPDATE, DELETE)</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>HTTP response generated by PEAR HTTP_Request library</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::createAnnotations()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">createAnnotations</span><span class="nb-faded-text">(string $lmdb_url, string $service_url, string $video_locators, string $annotations_file)</span> : object</code><div class="description"><p class="short_description">Create Annotations</p></div><div class="code-tabs"><div class="long-description">Parses the currently used annotation file and uses the private method createAnnotationTriples to create all annotation triples which have to get inserted into the CMF. In the case of inserting data for the first time
(no annotations of the selected video exist in the CMF) a n3 string gets created and this string is inserted in the CMF.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$lmdb_url</th><td>string</td><td><em><p>Base URL of the CMF/LMDB; Required Username/Password have to get included in this URL (e.g. http://username:password@URL)</p>
</em></td></tr><tr><th>$service_url</th><td>string</td><td><em><p>Path of the SPARQL service of the CMF/LMDB (normally: sparql/update)</p>
</em></td></tr><tr><th>$video_locators</th><td>string</td><td><em><p>Video array which contains the currently selected video ID and its locators</p></em></td></tr><tr><th>$annotations_file</th><td>string</td><td><em><p>Currently used annotation file name</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>HTTP response generated by PEAR HTTP_Request library</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::generateAnnotationObject()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">generateAnnotationObject</span><span class="nb-faded-text">(string $annotation_file, array $video_data, string $selected_serializer)</span> : string</code><div class="description"><p class="short_description">Generate Annotation Object</p></div><div class="code-tabs"><div class="long-description">Reads all data from a specified annotation file on the server and serialized its data using the ConnectME ontology. The output type can be specified by selecting a serializer (n3 triples, turtle, RDF/XML).</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$annotation_file</th><td>string</td><td><em><p>Path of the currently used annotation file on the server</p></em></td></tr><tr><th>$video_data</th><td>array</td><td><em><p>Video array which contains the currently selected video ID and its locators</p></em></td></tr><tr><th>$selected_serializer</th><td>string</td><td><em><p>Allows selecting a serializer for data display (Supported: n3, rdfxml, turtle)</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>string</td><td>Contains the serialized data using the ConnectME ontology</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::getResponse()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">getResponse</span><span class="nb-faded-text">(string $input_url)</span> : array</code><div class="description"><p class="short_description">Get Response</p></div><div class="code-tabs"><div class="long-description">Tries to get response from a specified URI/URL</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$input_url</th><td>string</td><td><em><p>Speified URI/URL</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>array</td><td>Received headers of specified URI/URL</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::parseJson()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">parseJson</span><span class="nb-faded-text">(string $input)</span> : object</code><div class="description"><p class="short_description">Parse Json</p></div><div class="code-tabs"><div class="long-description">Parses a annotation file which is located on the server and tries to extract its containing JSON string.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$input</th><td>string</td><td><em><p>Annotation file name</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>JSON object based on file content</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::toLog()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">toLog</span><span class="nb-faded-text">(string $input, string $filename = NULL)</span> : integer</code><div class="description"><p class="short_description">To Log</p></div><div class="code-tabs"><div class="long-description">Writes specified input string to a log file</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$input</th><td>string</td><td><em><p>String which shall get written to log</p></em></td></tr><tr><th>$filename</th><td>string</td><td><em><p>(Optional) Filename of log file; Default gets used, if not set</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>integer</td><td>Seconds based on input time string</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::transmitToLMDB()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">transmitToLMDB</span><span class="nb-faded-text">(string $lmdb_url, string $service_url, string $sparql_query)</span> : object</code><div class="description"><p class="short_description">Transmit to LMDB</p></div><div class="code-tabs"><div class="long-description">Communicates with the CMF/LMDB by using SPARQL queries. Uses SPARQL UPDATE and the SPARQL webservice of the CMF/LMDB.
Every query gets logged in the log file and can get accessed by an authorized administrator.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$lmdb_url</th><td>string</td><td><em><p>Base URL of the CMF/LMDB; Required Username/Password have to get included in this URL (e.g. http://username:password@URL)</p>
</em></td></tr><tr><th>$service_url</th><td>string</td><td><em><p>Path of the SPARQL service of the CMF/LMDB (normally: sparql/update)</p>
</em></td></tr><tr><th>$sparql_query</th><td>string</td><td><em><p>SPARQL query which gets sent to the CMF/LMDB</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>HTTP response generated by PEAR HTTP_Request library</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::updateAnnotations()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">updateAnnotations</span><span class="nb-faded-text">(string $lmdb_url, string $service_url, string $video_locators, string $annotations_file)</span> : object</code><div class="description"><p class="short_description">Update annotations</p></div><div class="code-tabs"><div class="long-description">Parses the currently used annotation file and loops through all existing annotation. Every new annotation gets added to the CMF, existing ones get updated and deleted ones get removed from the CMF instande.
The HTTP resspose of the CMF gets returned by this method.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$lmdb_url</th><td>string</td><td><em><p>Base URL of the CMF/LMDB; Required Username/Password have to get included in this URL (e.g. http://username:password@URL)</p>
</em></td></tr><tr><th>$service_url</th><td>string</td><td><em><p>Path of the SPARQL service of the CMF/LMDB (normally: sparql/update)</p>
</em></td></tr><tr><th>$video_locators</th><td>string</td><td><em><p>Video array which contains the currently selected video ID and its locators</p></em></td></tr><tr><th>$annotations_file</th><td>string</td><td><em><p>Currently used annotation file name</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>object</td><td>HTTP response generated by PEAR HTTP_Request library</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::validateURI()" class="anchor"></a><div class="method public"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_public.png" style="margin-right: 5px" alt="public"></img><span class="highlight">validateURI</span><span class="nb-faded-text">(string $video_uri)</span> : boolstring</code><div class="description"><p class="short_description">Validate URI</p></div><div class="code-tabs"><div class="long-description">Tries to get response from a specified URI/URL using the private method getResponse</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$video_uri</th><td>string</td><td><em><p>Speified URI/URL</p>
</em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolstring</td><td>True if the URI/URL responded and returned HTTP 200Error message if URI/URL did not respond</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div><a id="\CMF::writeToFile()" class="anchor"></a><div class="method private"><a href="#" class="gripper"><img src="../images/icons/arrow_right.png"></img><img src="../images/icons/arrow_down.png" style="display: none;"></img></a><code class="title"><img src="../images/icons/method.png" alt="method" title="method"></img><img src="../images/icons/visibility_private.png" style="margin-right: 5px" alt="private"></img><span class="highlight">writeToFile</span><span class="nb-faded-text">(object $input, string $filename)</span> : boolstring</code><div class="description"><p class="short_description">Write To File</p></div><div class="code-tabs"><div class="long-description">Parses the currently used annotation file and uses the method createAnnotationTriples to create all annotation triples which have to get inserted into the CMF. In the case of inserting data for the first time
(no annotations of the selected video exist in the CMF) a n3 string gets created and this string is inserted in the CMF.</div><strong>Parameters</strong><table class="argument-info"><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tr><th>$input</th><td>object</td><td><em><p>Object which shall get written into file (will get JSON encoded before writing to file)</p>
</em></td></tr><tr><th>$filename</th><td>string</td><td><em><p>Name of file to write to</p></em></td></tr></table><strong>Returns</strong><table class="argument-info"><thead><tr><th>Type</th><th>Description</th></tr></thead><tr><td>boolstring</td><td>True if $input successfully written to fileError message in case of error</td></tr></table><strong>Throws</strong><table class="argument-info"><thead><tr><th>Exception</th><th>Description</th></tr></thead><tr><td>\PHP</td><td><em>Exception</em></td></tr></table></div><div class="clear"></div></div></div></div></div><small class="footer">
            Documentation was generated by
            <a href="http://phpdoc.org">phpDocumentor
                2.0.1
</a>.
        </small></body></html>
